@model MvcSiteMapProvider.Web.Html.Models.MenuHelperModel
@using System.Web.Mvc.Html
@using MvcSiteMapProvider.Web.Html.Models

<h3 class="h3">
    <i class="fa-bars text-secondary"></i> @Resources.Res.Info_Menu MENU
</h3>
<!--選單入口-->
<div id="menu">
    <div class="panel">
        @foreach (var node in Model.Nodes)
        {
            //if (node.Children.Any()) //是否有子選單
            //{
                

                if (node.IsInCurrentPath) //是否為被選中的主項選單 選中的要展開次項選單
                {
                    <div class="panel-active">
                        @Html.DisplayFor(m => node)
                        <div id="menu-@node.Key" class="panel-collapse collapse in">
                            <ul class="panel-body list-unstyled">
                                @Html.DisplayFor(m => node.Children) <!--次項選單 -->
                            </ul>
                        </div>
                    </div>
                }
                else
                {
                    @Html.DisplayFor(m => node)
                    <div id="menu-@node.Key" class="panel-collapse collapse">
                        <ul class="panel-body list-unstyled">
                            @Html.DisplayFor(m => node.Children) <!--次項選單-->
                        </ul>
                    </div>
                }
            //}
        }
    </div>
</div>

